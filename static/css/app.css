:root{
  --bg:#0b1320;            /* header nền đậm */
  --bg-body:#f7f8fb;
  --card:#ffffff;
  --text:#1e293b;
  --muted:#6b7280;
  --primary:#4f46e5;
  --primary-600:#4338ca;
  --approve:#059669;
  --cancel:#dc2626;
  --border:#e5e7eb;
}

/* ============ Reset & Base ============ */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; font:16px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,Arial;
  color:var(--text); background:var(--bg-body);
}

/* ============ Header ============ */
.site-header{ background:var(--bg); color:#fff; position:sticky; top:0; z-index:10 }
.header-inner{ display:flex; align-items:center; justify-content:space-between; padding:12px 0 }
.brand{ color:#fff; text-decoration:none; font-weight:700; font-size:18px }
.nav{ display:flex; gap:8px }
.nav-link{ color:#c7d2fe; text-decoration:none; padding:6px 10px; border-radius:8px }
.nav-link:hover{ background:rgba(255,255,255,.08) }
.nav-toggle{ display:none; background:none; border:none; color:#fff; font-size:20px }
.container{ width:100%; max-width:1100px; margin:0 auto; padding:16px }

/* Mobile nav */
@media (max-width: 720px){
  .nav{ display:none; position:absolute; right:16px; top:56px; flex-direction:column; background:#141c2e; padding:8px; border-radius:10px }
  .nav-toggle{ display:block }
  .nav-open .nav{ display:flex }
}

/* ============ Footer ============ */
.site-footer{ padding:20px 0; color:var(--muted) }

/* ============ Layout & Cards ============ */
.grid{ display:grid; gap:16px }
.grid.grid-2{ grid-template-columns:1fr }
@media (min-width: 960px){ .grid.grid-2{ grid-template-columns:2fr 1fr } }

.max-sm{ max-width:420px; margin:0 auto }

.card{ background:var(--card); border:1px solid var(--border); border-radius:14px; overflow:hidden }
.card-header{ padding:12px 16px; border-bottom:1px solid var(--border); display:flex; gap:12px; align-items:center }
.card-header h2,.card-header h3{ margin:0 }
.card-body{ padding:16px }
.between{ justify-content:space-between }
.sep{ border:none; border-top:1px dashed var(--border); margin:12px 0 }

/* ============ Badges & Buttons ============ */
.badge{ background:#eef2ff; color:#3730a3; padding:4px 10px; border-radius:999px; font-size:12px }

.btn{ appearance:none; cursor:pointer; border:1px solid transparent; border-radius:12px; padding:8px 12px; background:#eef2ff; color:var(--text) }
.btn:hover{ background:#e4e9ff }
.btn-ghost{ background:transparent; border:1px solid var(--border) }
.btn-sm{ padding:6px 10px; border-radius:10px }
.btn-danger{ background:#fee2e2; border-color:#fecaca; color:#991b1b }
.btn-danger:hover{ background:#fecaca }
.btn-primary{
  background:linear-gradient(135deg,#6366f1,#8b5cf6); color:#fff;
  box-shadow:0 6px 16px rgba(99,102,241,.25);
}
.btn-primary:hover{ filter:brightness(1.03) }
.btn-approve{ background:var(--approve); border-color:var(--approve); color:#fff }
.btn-approve:hover{ filter:brightness(0.95) }
.btn-cancel{ background:var(--cancel); border-color:var(--cancel); color:#fff }
.btn-dot{ display:inline-block; width:8px; height:8px; border-radius:999px; background:#fff; margin-right:8px }

/* ============ Forms (floating label đẹp) ============ */
.form label{ display:block; font-weight:600; margin-bottom:10px }
.form input{ width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:10px; margin-top:6px }
.form-hint{ color:var(--muted); margin-top:10px }

/* Floating fields cho modal đẹp */
.ui-field{ position:relative; }
.ui-field input{
  width:100%; height:46px; padding:14px 14px 12px;
  border:1px solid #e5e7eb; border-radius:14px;
  background:#f8fafc; outline:none;
  transition:border .15s, box-shadow .15s, background .15s;
}
.ui-field input::placeholder{ opacity:0 } /* dùng label nổi */
.ui-field label{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  padding:0 6px; color:#6b7280; font-size:14px; pointer-events:none; transition:all .15s ease;
}
.ui-field input:focus{
  border-color:#6366f1; background:#fff; box-shadow:0 0 0 4px rgba(99,102,241,.12);
}
.ui-field input:focus + label,
.ui-field input:not(:placeholder-shown) + label{
  top:-9px; transform:none; background:#fff; color:#4f46e5; font-size:12px; border-radius:6px;
}
.ui-field .hint{ color:#6b7280; font-size:12px; margin-top:6px; padding-left:4px }

.form-grid{ display:grid; gap:14px; grid-template-columns:1fr 1fr }
.form-grid .span-2{ grid-column:span 2 }
.mt-12{ margin-top:12px }
.right{ display:flex; justify-content:flex-end; align-items:center }
.gap-8{ gap:8px }

/* ============ Chat ============ */
.chat{ display:flex; flex-direction:column; min-height:60vh }
.chat-body{ flex:1; overflow:auto; padding:16px; display:flex; flex-direction:column; gap:10px }
.bubble{ max-width:90%; padding:10px 12px; border-radius:12px; white-space:pre-wrap }
.bubble.bot{ background:#f1f5f9; align-self:flex-start }
.bubble.user{ background:#e0e7ff; align-self:flex-end }
.chat-input{ display:flex; gap:10px; border-top:1px solid var(--border); padding:10px; background:#fff }
.chat-input input{ flex:1; border:1px solid var(--border); border-radius:10px; padding:10px }

/* ============ Tables ============ */
.table-wrap{ width:100%; overflow:auto }
.table{ width:100%; border-collapse:separate; border-spacing:0 }
.table th,.table td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align:left; white-space:nowrap }
.table thead th{ position:sticky; top:0; background:#fafafa; z-index:1 }
.actions{ display:flex; gap:8px }

/* Pretty table cho Admin */
.h3{ font-size:20px; font-weight:700 }
.small{ font-size:12px }
.stack-sm{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
.title-wrap{ display:flex; flex-direction:column; gap:4px }

.table-wrap.pretty{ border:1px solid var(--border); border-radius:16px; overflow:auto; background:#fff }
.table.pretty thead th{
  position:sticky; top:0; background:#f8fafc; z-index:1;
  font-weight:700; letter-spacing:.2px; border-bottom:1px solid var(--border);
}
.table.pretty tbody tr{ transition:background .15s ease }
.table.pretty tbody tr:hover{ background:#f9fafb }
.table.pretty td,.table.pretty th{ white-space:nowrap; padding:12px 14px }

/* Khi modal mở, tắt sticky header để KHÔNG đè lên modal */
.modal-open .table.pretty thead th,
.modal-open .table thead th{
  position:static !important; z-index:auto !important;
}

/* ============ Tabs ============ */
.tabs{ display:flex; gap:6px; padding:8px 12px; border-bottom:1px solid var(--border) }
.tab{ border:none; background:#f8fafc; padding:8px 12px; border-radius:10px; cursor:pointer }
.tab.active{ background:#e0e7ff; color:#3730a3; font-weight:600 }
.tab-panels{ padding:8px }
.tab-panel{ display:none }
.tab-panel.active{ display:block }

/* ============ Modal (đẹp + chuẩn layer) ============ */
.modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1000 }
.modal.show{ display:flex }
.modal-backdrop{
  position:absolute; inset:0; background:rgba(17,24,39,.45);
  backdrop-filter: blur(2px); z-index:1000
}
.modal-card{
  position:relative; z-index:1001; width:min(720px,92vw);
  background:#fffffff2; border-radius:18px; border:1px solid var(--border);
  box-shadow:0 24px 64px rgba(0,0,0,.20), 0 2px 10px rgba(0,0,0,.06);
  overflow:hidden; animation:pop .18s ease;
}
@keyframes pop{ from{ transform:translateY(6px); opacity:0 } to{ transform:translateY(0); opacity:1 } }

.modal-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:8px }

/* ============ Helpers ============ */
.kv{ display:flex; gap:8px; align-items:center; margin:4px 0 }
.kv span{ color:var(--muted) }
.muted{ color:var(--muted) }

/* Toast */
.toast{
  position:fixed; bottom:18px; right:18px; background:#111827; color:#fff;
  padding:12px 14px; border-radius:14px; box-shadow:0 8px 24px rgba(0,0,0,.18);
  opacity:0; transform:translateY(10px); transition:all .25s ease; z-index: 1500; pointer-events:none;
}
.toast.show{ opacity:1; transform:translateY(0) }

/* Spinner nhỏ trong nút */
.spinner{
  width:14px; height:14px; border-radius:999px;
  border:2px solid rgba(255,255,255,.5); border-top-color:#fff;
  display:inline-block; margin-right:8px; animation:spin .7s linear infinite;
}
@keyframes spin{ to{ transform:rotate(360deg) } }

/* ============ Admin Chats panel ============ */
.chats-wrap{ display:grid; grid-template-columns:320px 1fr; gap:12px; min-height:60vh }
@media (max-width: 960px){ .chats-wrap{ grid-template-columns:1fr } }
.chats-list{ border-right:1px solid var(--border); padding-right:8px }
@media (max-width: 960px){ .chats-list{ border-right:none; padding-right:0 } }
.chats-toolbar{ display:flex; gap:8px; margin-bottom:8px }
.chats-toolbar input{ flex:1; padding:8px 10px; border:1px solid var(--border); border-radius:10px }
#chat-sessions{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; max-height:60vh; overflow:auto }
.chat-item{ padding:10px 12px; border:1px solid var(--border); border-radius:10px; cursor:pointer; background:#fff; display:flex; justify-content:space-between; align-items:center }
.chat-item:hover{ background:#f8fafc }
.chat-item .sid{ font-weight:600; word-break:break-all }
.chat-item .sub{ font-size:12px }
.chats-view{ display:flex; flex-direction:column; gap:8px }
.chats-header{ display:flex; justify-content:space-between; align-items:center }
.chatlog{ flex:1; min-height:50vh; border:1px solid var(--border); border-radius:12px; padding:12px; overflow:auto; background:#fff; display:flex; flex-direction:column; gap:8px }

/* Session history modal (client) */
.sessions-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; max-height:60vh; overflow:auto }
.sessions-list .chat-item{ padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:#fff }
.sessions-list .sid{ font-family:monospace; word-break:break-all }
.sessions-list .actions .btn{ padding:6px 10px }

/* ============ Responsive tweaks ============ */
@media (max-width: 860px){
  .form-grid{ grid-template-columns:1fr }
  .form-grid .span-2{ grid-column:span 1 }
  /* Có thể ẩn bớt cột trên mobile nếu muốn:
  .table.pretty thead th:nth-child(3), .table.pretty tbody td:nth-child(3){ display:none; } */
}
